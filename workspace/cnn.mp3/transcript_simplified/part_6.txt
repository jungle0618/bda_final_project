Channel如果今天是彩色圖片的話，那就是RGB三個channel。如果是黑白的圖片的話，它的channel就等於1。一個convolutional的layer裡面，有一排的filter。每個filter都是一個3乘以3乘以channel這麼大的tensor。每個filter的作用是要去圖片裡面抓取某一個pattern。但這些pattern要在3乘以3乘以channel這麼小的範圍內，才能夠被這些filter抓出來。這些filter怎麼去圖片裡面抓pattern呢？我們現在舉一個實際的例子。在等一下的例子裡面，我們假設channel是1，也就是我們圖片是黑白的圖片。我們假設這些filter的參數是已知的。Filter是一個一個的tensor。這個tensor裡面的數值我們都已經知道了。但實際上這些tensor裡面的數值其實是model裡面的parameter。這些filter裡面的數值其實是未知的，它是要透過gradient descent去找出來的。我們現在已經假設這些filter裡面的數值已經找出來了，我們來看看這些filter是怎麼跟一張圖片進行運作，怎麼去圖片上面把pattern偵測出來的。這是我們的圖片。它是一個6乘以6的大小圖片。這些filter怎麼在這個圖片上面去偵測pattern呢？它的做法是這樣。先把filter放在圖片的左上角。然後把filter裡面所有的值，這邊有九個值，把這九個值跟左上角這個範圍內的九個值做相乘，也就是把這個filter裡面的九個值跟這個範圍裡面的九個值做inner product。做完是多少呢？心算，是3。然後接下來這個filter本來放在左上角，接下來就往右移一點。這個移動的距離叫做stride。在剛才講前一個版本的故事的時候，我們stride是設2。在這個版本的故事裡面，我們stride設為1。往右移一點，再把這個filter跟這個範圍裡面的數值算inner product，算出來是多少呢？心算，算出來是負1嗎？對，這個太簡單了，是太簡單的數學。然後把它再往右移一點。這邊有1，這邊有1、1、1，這邊負1、負1、負1，算出來多少？負3。以此類推，再往右移一點，再算一下。這邊全部掃完以後往下一點，再算一下。以此類推，一直到把這個filter放在右下角，算出一個數值。它是多少？這邊1、1、1，這邊負1、1、負1，答案是負1。這個filter怎麼說它在偵測pattern呢？你看到filter裡面它對角線的地方都是1。所以它看到image裡面出現什麼東西的時候，它的值會最大。看到image裡面也出現連三個1的時候，它的數值會最大。所以你會發現，在這邊的輸出裡面，左上角的地方值最大，左下角的地方值最大。告訴我們，這個圖片裡面左上角有出現3，左上角有出現這個pattern。左下角有出現這個三個1點在一起的pattern。這是第一個filter。接下來我們把每一個filter都做重複的process。比如說這邊有第二個filter。第二個filter很明顯，它要偵測1排成一直線的時候的狀況。我們把第二個filter先從左上角開始掃起，得到一個數值。往右移一點，再得到一個數值。再往右移一點，再得到一個數值。反复同樣的process，反复同樣的操作，直到把整張圖片都掃完，我們又得到另外一群數值。所以每個filter都會給我們一群數值。紅色的filter給我們一群數值。藍色的filter給我們一群數值。如果我們有64個filter，我們得到64群的數值了。這一群數值，它又有一個名字，它叫做feature map。所以當我們把一張圖片通過一個convolutional的layer，裡面有一堆filter的時候，我們產生出來了一個feature map。假設這個convolutional的layer裡面它有64個filter，那我們產生的這個feature map，有64組數值。每一組在這個例子裡面是4乘以4。第一個filter產生4乘以4的數字，第二個filter也產生4乘以4的數字，第三個也產生4乘以4的數字，乃至到64個filter都產生4乘以4的數字。這個feature map可以看成是什麼？這個feature map你可以看成是另外一張新的圖片。只是這個圖片的channel不是RGB，這個圖片的channel有64個。每一個channel對應到一個filter。本來一張圖片它三個channel。通過一個convolution，它變成一張新的圖片，有64個channel。這個convolutional layer當然是可以疊很多層的。剛才是疊了第一層。如果疊第二層會發生什麼事？第二層的convolution裡面，也有一堆的filter。